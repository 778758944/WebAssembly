<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>WebAssembly</title>
<meta name="description" content="">
<meta name="keywords" content="">
<link href="" rel="stylesheet">
</head>
<body>
    <h1>WebAssembly</h1>
    <script>
    	function loadWebAssembly(path) {
    		return fetch(path)
    			.then(res => res.arrayBuffer())
    			.then(WebAssembly.instantiate)
    			.then(mod => mod.instance)
    	}

    	loadWebAssembly('/fibonacci.wasm').then((instance) => {
    		// console.log(instance);
    		const { _Z9fibonaccii } = instance.exports;
    		// console.time('c-fib');
    		// console.log(_Z9fibonaccii(45));
    		// console.timeEnd('c-fib');
    		// console.log(_Z9fibonaccii(50));
    		// console.time('fib');
    		for(var i = 1; i <= 45; i++){
    			console.time(`c-fib-${i}`);
    			console.log(_Z9fibonaccii(i));
    			console.timeEnd(`c-fib-${i}`);
    		}
    		// console.timeEnd('fib');
    	})
    </script>
    <!-- <script src="/test.js"></script> -->
</body>
</html>